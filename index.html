<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>الموقع قيد التحديث | Toribble</title>
  <style>
    :root{
      --bg-gradient-start:#e8eef6;
      --bg-gradient-end:#f7f9fb;
      --card-bg: rgba(255,255,255,0.36);
      --card-border: rgba(255,255,255,0.45);
      --text: #222;
      --muted: #555;
      --accent-shadow: rgba(0,0,0,0.08);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: "Poppins", "Cairo", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(135deg,var(--bg-gradient-start),var(--bg-gradient-end));
      display:flex;
      align-items:center;
      justify-content:center;
      direction:rtl;
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      min-height:100vh;
      padding:24px;
    }

    /* overlay optional (soft blur) */
    .overlay{
      position:fixed;inset:0;
      pointer-events:none;
      backdrop-filter: blur(16px) saturate(110%);
      -webkit-backdrop-filter: blur(16px) saturate(110%);
      background: rgba(255,255,255,0.02);
    }

    .card{
      position:relative;
      width:100%;
      max-width:720px;
      border-radius:18px;
      padding:36px 44px;
      background:var(--card-bg);
      border:1px solid var(--card-border);
      box-shadow:0 10px 30px var(--accent-shadow);
      text-align:center;
      animation: enter 600ms cubic-bezier(.16,.84,.24,1);
      backdrop-filter: blur(18px);
    }

    @keyframes enter{
      from{opacity:0;transform:translateY(18px)}
      to{opacity:1;transform:none}
    }

    h1{
      font-size:1.7rem;
      margin-bottom:8px;
      color:var(--text);
    }

    p{
      color:var(--muted);
      font-size:1.03rem;
      line-height:1.6;
      margin-bottom:18px;
    }

    .timer{
      display:flex;
      gap:14px;
      justify-content:center;
      align-items:center;
      margin-top:8px;
      flex-wrap:wrap;
    }

    .time-box{
      min-width:72px;
      padding:12px 16px;
      border-radius:10px;
      background: rgba(255,255,255,0.55);
      box-shadow: inset 3px 3px 10px rgba(0,0,0,0.06), inset -3px -3px 8px rgba(255,255,255,0.8);
      transition:transform .25s ease,box-shadow .25s ease,background .25s ease;
      font-weight:600;
      color:var(--text);
    }

    .time-box small{
      display:block;
      margin-top:6px;
      font-weight:500;
      color:var(--muted);
      font-size:0.85rem;
    }

    .time-box:hover{transform:scale(1.05);box-shadow:0 10px 30px rgba(0,0,0,0.08)}

    footer{
      margin-top:18px;
      font-size:0.9rem;
      color:#6b6b6b;
    }

    @media (max-width:520px){
      .card{padding:20px 18px;border-radius:14px}
      h1{font-size:1.3rem}
      .time-box{min-width:60px;padding:10px 12px;font-size:0.98rem}
    }
  </style>
</head>
<body>
  <div class="overlay" aria-hidden="true"></div>

  <main class="card" role="main" aria-labelledby="title">
    <h1 id="title">⚙️ الموقع قيد التحديث</h1>
    <p id="desc">نعتذر عن الإزعاج — الموقع سيتوقف مؤقتًا لمدة أسبوع بسبب ظروف دراسية وكدا. سنعود قريبًا بتحديثات أقوى وأفضل. شكرًا لصبركم ❤️</p>

    <div class="timer" aria-live="polite" aria-atomic="true" id="timer">
      <div class="time-box" aria-hidden="false"><span id="days">0</span><small>يوم</small></div>
      <div class="time-box"><span id="hours">0</span><small>ساعة</small></div>
      <div class="time-box"><span id="minutes">0</span><small>دقيقة</small></div>
      <div class="time-box"><span id="seconds">0</span><small>ثانية</small></div>
    </div>

    <footer>© 2025 Toribble — جميع الحقوق محفوظة</footer>
  </main>

  <script>
    (function () {
      // مدة 7 أيام بالمللي ثانية
      const SEVEN_DAYS_MS = 7 * 24 * 60 * 60 * 1000;
      const STORAGE_KEY = "tribble_maintenance_end";

      // عناصر DOM
      const elDays = document.getElementById("days");
      const elHours = document.getElementById("hours");
      const elMinutes = document.getElementById("minutes");
      const elSeconds = document.getElementById("seconds");
      const container = document.querySelector(".card");

      // احصل على تاريخ الانتهاء من localStorage أو أنشئ واحد جديد
      let endTimestamp = null;
      try {
        const stored = localStorage.getItem(STORAGE_KEY);
        if (stored) {
          // تخزين كـ رقم (string) — تأكد من التحويل
          const n = Number(stored);
          if (!Number.isNaN(n) && n > Date.now()) {
            endTimestamp = n;
          }
        }
      } catch (e) {
        // إذا localStorage مقفول أو فشل، نتخطى ونستخدم جلسة مؤقتة
        endTimestamp = null;
      }

      if (!endTimestamp) {
        const now = Date.now();
        endTimestamp = now + SEVEN_DAYS_MS;
        try { localStorage.setItem(STORAGE_KEY, String(endTimestamp)); } catch (e) { /* ignore */ }
      }

      // تنسيق قيمة رقمية لعرض مرتّب (لو حبيت)
      function pad(n){ return String(n); }

      // تحديث المؤقت كل ثانية
      let intervalId = null;
      function update() {
        const now = Date.now();
        const diff = endTimestamp - now;

        if (diff <= 0) {
          // انتهى
          if (intervalId) { clearInterval(intervalId); intervalId = null; }
          try { localStorage.removeItem(STORAGE_KEY); } catch(e){/*ignore*/}
          container.innerHTML = '<h1>✨ عدنا من جديد!</h1><p>تم الانتهاء من التحديثات، شكرًا لصبركم ❤️</p>';
          return;
        }

        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);

        // عرض القيم
        elDays.textContent = pad(days);
        elHours.textContent = pad(hours);
        elMinutes.textContent = pad(minutes);
        elSeconds.textContent = pad(seconds);
      }

      // تشغيل
      update();
      intervalId = setInterval(update, 1000);

      // نظافة عند الخروج من الصفحة (مش مطلوب لكن آمن)
      window.addEventListener("beforeunload", function () {
        // لا نحذف التاريخ هنا — يجب أن يبقى محفوظ
      });
    })();
  </script>
</body>
</html>
